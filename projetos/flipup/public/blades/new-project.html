<h1>Novo Projeto</h1>
<div class="form" id="new-project-form">
    <div>
        <h3>Informações Gerais</h3>
        <div class="input-option">
            <label for="project-name">Nome do Projeto</label>
            <input name="project-name" id="project-name" type="text" placeholder="Projeto 1">
        </div>
        <div class="input-option">
            <label for="project-photo">Foto de Capa</label>
            <input type="file" name="project-photo" id="image-file">
        </div>
    </div>
    <div class="border-left">
        <h3>Dados do Imóvel</h3>
        <div class="input-option">
            <label for="project-adress">Endereço</label>
            <input name="project-adress" onfocus="suggestAdress()" onfocusout="closeAdressSugestion()" onkeyup="suggestAdress()" id="project-adress" type="text" placeholder="Avenida Brasil, 123 - Ap . 456, Brasil">
            <div id="autocomplete-adress">Digite para obter sugestões...</div>
        </div>
        <div class="input-option">
            <label for="project-area">Área (m2)</label>
            <input name="project-area" id="project-area" type="number" placeholder="205">
        </div>
        <div class="input-option">
            <label for="project-quartos">Número de Quartos</label>
            <input name="project-quartos" id="project-quartos" type="number" placeholder="3">
        </div>
        <div class="input-option">
            <label for="project-banheiros">Número de banheiros</label>
            <input name="project-banheiros" id="project-banheiros" type="number" placeholder="5">
        </div>
        <div class="input-option">
            <legend>Tem Elevador?</legend>
            <div>
                <input name="elevador" type="radio" id="elevator-yes">
                <label for="elevador">Sim</label>
            </div>
            <div>
                <input name="elevador" type="radio" id="elevator-no">
                <label for="elevador">Não</label>
            </div>
        </div>
        <div class="input-option">
            <label for="project-vagas">Número de Vagas</label>
            <input name="project-vagas" id="project-vagas" type="number" placeholder="2">
        </div>
        <div class="input-option">
            <label for="project-condominio">Valor do Condomínio</label>
            <input name="project-condominio" id="project-condominio" type="number" placeholder="1900">
        </div>
    </div>
    <div class="border-left">
        <h3>Dados do Anúncio</h3>
        <div class="input-option">
            <label for="project-anuncio">Valor do Anúncio</label>
            <input name="project-anuncio" id="project-anuncio" type="number" placeholder="565.952,00">
        </div>
        <div class="input-option">
            <label for="project-metro">Valor por m2</label>
            <input name="project-metro" id="project-metro" type="number" placeholder="2000,00">
        </div>
        <div class="input-option">
            <label for="project-link">Link do Anúncio</label>
            <input name="project-link" id="project-link" type="text" placeholder="Insira o Link aqui">
        </div>
        <div class="input-option">
            <label for="project-notes">Notas/Comentários</label>
            <textarea name="project-notes" id="project-notes" placeholder="Outras anotações"></textarea>
        </div>
        <p id="error-message"></p>
        <button class="highlight-button" onclick="validateProject()">Salvar</button>
    </div>
</div>
<script type="module">
    const { Map } = await google.maps.importLibrary("maps");
    var geocoder = new google.maps.Geocoder();
    window.suggestAdress = function() {
        openAdressSugestion();
        var input = document.getElementById('project-adress').value;
        geocoder.geocode( { 'address': input}, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                document.getElementById('autocomplete-adress').innerHTML = '';
                for(var k = 0; k < results.length; k++) {
                    var element = document.createElement('p');
                    element.innerHTML = results[k].formatted_address;
                    element.onclick = function() {
                        document.getElementById('project-adress').value = this.innerHTML;
                        closeAdressSugestion();
                    }
                    document.getElementById('autocomplete-adress').appendChild(element);
                }
            } else {
                document.getElementById('autocomplete-adress').innerHTML = "Digite para obter sugestões...";
            }
        });
    }
    window.openAdressSugestion = function() {
        document.getElementById('autocomplete-adress').style.display = 'flex';
    }
    window.closeAdressSugestion = function() {
        setTimeout(() => {
            document.getElementById('autocomplete-adress').innerHTML = "Digite para obter sugestões...";
            document.getElementById('autocomplete-adress').style.display = 'none';
        }, 100);
    }
</script>